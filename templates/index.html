<!DOCTYPE html>
<html lang="en">
<head>
    <title>Country Risk-Free Rate Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Country Risk-Free Rate Calculator ğŸ“ˆ</h1>
        {% if error_message %}
            <div style="color:red; text-align:center; margin-bottom:10px; font-weight:bold;">
                &#x26A0; {{ error_message }} &#x26A0;
            </div>
        {% endif %}
        <form method="POST">
            <label for="country">Select Country:</label>
            <select id="country" name="country" required>
                <option value="" disabled selected>Select country</option>
                {% for country in countries %}
                    <option value="{{ country }}" {% if selected_country==country %}selected{% endif %}>{{ country }}</option>
                {% endfor %}
            </select>

            <label for="date">Select Date to Calculate RFR:</label>
            <input type="date" id="date" name="date" value="{{selected_date}}" required>

            <button type="submit">Calculate Risk-Free Rate</button>
        </form>

        {% if calculated %}
            <div class="result">
                <h2>Result for {{calculated.country}} (10-Year at {{calculated.chosen_date}})</h2>
                <ul>
                    <li>ğŸ¯ <strong>Maturity Date:</strong> {{calculated.maturity}}</li>
                    <li>ğŸ“Œ <strong>Bond Name:</strong> {{calculated.bond_name}}</li>
                    <li>ğŸ’³ <strong>ISIN:</strong> {{calculated.isin}}</li>
                    <li>âœ… <strong>Yield-to-Maturity (Risk-Free Rate):</strong> {{calculated.ytm}}%</li>
                </ul>
                <!-- <h3>Rows used for calculation:</h3>
                {{calculation_rows|safe}} -->
            </div>
        {% endif %}
        {% if nss_params %}
            <div class="result">
                <h2>NSS Curve Parameters ({{calculated.country}})</h2>
                <table>
                    <tr><th>Beta0</th><th>Beta1</th><th>Beta2</th><th>Beta3</th><th>Tau1</th><th>Tau2</th></tr>
                    <tr>
                        <td>{{nss_params.Beta0}}</td>
                        <td>{{nss_params.Beta1}}</td>
                        <td>{{nss_params.Beta2}}</td>
                        <td>{{nss_params.Beta3}}</td>
                        <td>{{nss_params.Tau1}}</td>
                        <td>{{nss_params.Tau2}}</td>
                    </tr>
                </table>
                {% if nss_plot_url %}
                    <h3>Yield Curve Plot</h3>
                    <img src="{{ url_for('static', filename='plots/' + nss_plot_url.split('/')[-1]) }}" alt="NSS Yield Curve" style="width:100%;max-width:650px;">
                {% endif %}
            </div>
            {% endif %}
    </div>

</body>
</html>